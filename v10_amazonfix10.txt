1. 



2. Only update for rank_u
liurui@ubuntu:~/DeepRec$ KERAS_BACKEND=theano python v10_2Embed_2MLPshare/MLP.py --learner adam --lr 0.0001 --batch_size_random 2000000 --path Data/amazonfix10/ 
Using Theano backend.
MLP arguments: Namespace(batch_size=256, batch_size_random=2000000, epochs=20, layers='[64,32,16,8]', learner='adam', lr=0.0001, path='Data/amazonfix10/', reg_layers='[0,0,0,0]', verbose=1) 
Load data done [88.9 s]. #user=28881, #item=30133, #train_user=2599290, #train_item=7240784, #test=1277634
Time: [189.7], Init: 
Init_NDCG: [ 0.68859419  0.69068865  0.69327482  0.69711602  0.70152586  0.70723559
  0.71406405  0.72193875  0.73075896  0.74103424]
RatingInit_NDCG: [ 0.69669887  0.69768387  0.70035491  0.70347162  0.70753766  0.71259037
  0.71900325  0.72643551  0.73522372  0.74535584]
Iteration 0 [173.6 s]: rank_loss = 0.654796 [176.77 s],
NDCG: [ 0.80358453  0.79873025  0.79777489  0.79750696  0.79847165  0.80065898
  0.80412376  0.80864974  0.81437929  0.82130904]
Iteration 1 [172.0 s]: rank_loss = 0.641525 [176.55 s],
NDCG: [ 0.79059948  0.79149716  0.79210019  0.79269708  0.79470506  0.79753401
  0.80162467  0.80636973  0.8122283   0.81908616]
Iteration 2 [172.9 s]: rank_loss = 0.640209 [176.52 s],
NDCG: [ 0.78706334  0.788151    0.78928374  0.79073593  0.79295062  0.79583462
  0.80014344  0.80526544  0.81122597  0.81838364]
Iteration 3 [174.5 s]: rank_loss = 0.639379 [176.95 s],
NDCG: [ 0.78580827  0.78826299  0.7894329   0.79053684  0.79274478  0.79584757
  0.79999039  0.80509202  0.81121467  0.81824663]
Iteration 4 [169.5 s]: rank_loss = 0.638914 [175.73 s],
NDCG: [ 0.78618931  0.78771333  0.78852346  0.79034733  0.79231584  0.7956981
  0.80012867  0.80501837  0.8110828   0.81828263]
Iteration 5 [170.5 s]: rank_loss = 0.638522 [175.09 s],
NDCG: [ 0.78508071  0.78685978  0.78836344  0.78976824  0.79226168  0.79504283
  0.79954107  0.80469133  0.81066507  0.81786031]
Iteration 6 [169.7 s]: rank_loss = 0.637957 [175.07 s],
NDCG: [ 0.78590224  0.78800886  0.78842004  0.79002423  0.79251693  0.79567656
  0.79993799  0.80504881  0.81088226  0.81806701]
Iteration 7 [170.0 s]: rank_loss = 0.637824 [174.82 s],
NDCG: [ 0.78491449  0.78660724  0.78816533  0.78973359  0.79228494  0.79526745
  0.79969106  0.80462927  0.81079388  0.8179817 ]
Iteration 8 [169.6 s]: rank_loss = 0.637476 [175.49 s],
NDCG: [ 0.78488867  0.78719585  0.78825829  0.78976856  0.79248601  0.79551565
  0.79997785  0.80490068  0.81102065  0.81806087]
Iteration 9 [170.9 s]: rank_loss = 0.637420 [174.87 s],
NDCG: [ 0.78358082  0.78610139  0.78765366  0.78925943  0.79218946  0.79505648
  0.79928364  0.80443273  0.81071838  0.8178756 ]
Iteration 10 [170.5 s]: rank_loss = 0.637144 [185.90 s],
NDCG: [ 0.7843179   0.7863503   0.78745901  0.78914471  0.79191981  0.79549065
  0.79950005  0.80454745  0.81068308  0.81804812]
Iteration 11 [174.7 s]: rank_loss = 0.636952 [174.80 s],
NDCG: [ 0.78361528  0.78600648  0.7872202   0.78906471  0.79148718  0.79478705
  0.79921342  0.80432051  0.81062125  0.81780291]
Iteration 12 [179.8 s]: rank_loss = 0.636891 [175.28 s],
NDCG: [ 0.78437609  0.78603781  0.7873984   0.78915133  0.79185851  0.79515511
  0.79948535  0.80466958  0.81084375  0.81803834]
Iteration 13 [177.4 s]: rank_loss = 0.636705 [175.13 s],
NDCG: [ 0.78320485  0.78543404  0.78696052  0.78877608  0.79160194  0.79495142
  0.79903804  0.80415303  0.81033906  0.81767764]
Iteration 14 [184.8 s]: rank_loss = 0.636522 [177.82 s],
NDCG: [ 0.78347508  0.78538872  0.78685622  0.78881462  0.79135071  0.79487764
  0.79927134  0.80434219  0.81045534  0.8176563 ]
Iteration 15 [221.0 s]: rank_loss = 0.636403 [191.08 s],
NDCG: [ 0.78202641  0.78523918  0.78704695  0.78859711  0.79143908  0.79441608
  0.79888891  0.80416221  0.81030738  0.81760893]
Iteration 16 [242.9 s]: rank_loss = 0.636476 [188.84 s],
NDCG: [ 0.78145618  0.78436958  0.78614269  0.78802372  0.79102969  0.79435992
  0.79863697  0.80383069  0.80996085  0.81716379]
Iteration 17 [501.0 s]: rank_loss = 0.636365 [189.49 s],
NDCG: [ 0.78145305  0.78468955  0.78624928  0.7882533   0.79099963  0.7943783
  0.79861621  0.80377039  0.81008999  0.81725999]
Iteration 18 [534.1 s]: rank_loss = 0.636302 [186.05 s],
NDCG: [ 0.78247878  0.7849153   0.78681111  0.78847231  0.79133142  0.79462069
  0.79887699  0.80392915  0.81008154  0.81735766]
Iteration 19 [527.4 s]: rank_loss = 0.636072 [185.51 s],
NDCG: [ 0.78317842  0.78545959  0.7869235   0.78842819  0.79136159  0.79471529
  0.79892603  0.80402313  0.81014902  0.81734203]
End. Best Iteration 0.

